// Generated by CoffeeScript 1.12.7
(function() {
  var Lib, defineModule, max, ref;

  ref = require('art-standard-lib'), defineModule = ref.defineModule, max = ref.max;

  defineModule(module, Lib = (function() {
    var firstLines, lastLines;

    function Lib() {}

    Lib.lastLines = lastLines = function(string, count) {
      var a;
      if (count == null) {
        count = 5;
      }
      a = string.split("\n");
      return a.slice(max(0, a.length - count), a.length).join("\n");
    };

    Lib.firstLines = firstLines = function(string, count) {
      var a;
      if (count == null) {
        count = 5;
      }
      a = string.split("\n");
      return a.slice(0, count).join("\n");
    };

    Lib.presentSourceLocation = function(source, index, options) {
      var color, halfMaxLines, insertString, maxLines, ref1, ref2, sourceAfter, sourceBefore;
      if (options == null) {
        options = {};
      }
      maxLines = (ref1 = options.maxLines) != null ? ref1 : 10, color = options.color, insertString = (ref2 = options.insertString) != null ? ref2 : "<HERE>";
      if (color) {
        if (color === true) {
          color = "red";
        }
        insertString = ("" + insertString)[color];
      }
      sourceBefore = source.slice(0, index);
      sourceAfter = source.slice(index);
      if (maxLines) {
        halfMaxLines = Math.ceil(maxLines / 2);
        sourceBefore = lastLines(sourceBefore, halfMaxLines);
        sourceAfter = firstLines(sourceAfter, halfMaxLines);
      }
      return "" + sourceBefore + insertString + (sourceAfter.replace(/[\s\n]+$/, ''));
    };

    return Lib;

  })());

}).call(this);

//# sourceMappingURL=Lib.js.map
